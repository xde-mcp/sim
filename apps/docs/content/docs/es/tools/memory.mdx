---
title: Memoria
description: Almacena y recupera el historial de conversaciones
---

import { BlockInfoCard } from "@/components/ui/block-info-card"

<BlockInfoCard 
  type="memory"
  color="#F64F9E"
/>

## Descripción general

El bloque Memory almacena el historial de conversaciones para agentes. Cada memoria se identifica mediante un `conversationId` que proporcionas. Múltiples agentes pueden compartir la misma memoria usando el mismo `conversationId`.

Memory almacena solo mensajes de usuario y asistente. Los mensajes del sistema no se almacenan, se configuran en el bloque Agent y se añaden como prefijo en tiempo de ejecución.

## Herramientas

### `memory_add`

Añade un mensaje a la memoria. Crea una nueva memoria si el `conversationId` no existe, o añade al final de la memoria existente.

#### Entrada

| Parámetro | Tipo | Obligatorio | Descripción |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | string | Sí | Identificador único para la conversación (ej., `user-123`, `session-abc`) |
| `role` | string | Sí | Rol del mensaje: `user` o `assistant` |
| `content` | string | Sí | Contenido del mensaje |

#### Salida

| Parámetro | Tipo | Descripción |
| --------- | ---- | ----------- |
| `success` | boolean | Si la operación tuvo éxito |
| `memories` | array | Array de memoria actualizado |
| `error` | string | Mensaje de error si falló |

### `memory_get`

Recupera la memoria por ID de conversación.

#### Entrada

| Parámetro | Tipo | Obligatorio | Descripción |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | string | Sí | Identificador de conversación |

#### Salida

| Parámetro | Tipo | Descripción |
| --------- | ---- | ----------- |
| `success` | boolean | Si la operación tuvo éxito |
| `memories` | array | Array de mensajes con `role` y `content` |
| `error` | string | Mensaje de error si falló |

### `memory_get_all`

Recuperar todas las memorias del espacio de trabajo actual.

#### Salida

| Parámetro | Tipo | Descripción |
| --------- | ---- | ----------- |
| `success` | boolean | Indica si la operación se realizó correctamente |
| `memories` | array | Todos los objetos de memoria con campos `conversationId` y `data` |
| `error` | string | Mensaje de error si la operación falló |

### `memory_delete`

Eliminar memoria por ID de conversación.

#### Entrada

| Parámetro | Tipo | Obligatorio | Descripción |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | string | Sí | Identificador de conversación a eliminar |

#### Salida

| Parámetro | Tipo | Descripción |
| --------- | ---- | ----------- |
| `success` | boolean | Indica si la operación se realizó correctamente |
| `message` | string | Mensaje de confirmación |
| `error` | string | Mensaje de error si la operación falló |

## Tipos de memoria del agente

Al usar memoria con un bloque de agente, puedes configurar cómo se gestiona el historial de conversación:

| Tipo | Descripción |
| ---- | ----------- |
| **Conversación completa** | Almacena todos los mensajes, limitado por la ventana de contexto del modelo (usa el 90% para dejar espacio para la respuesta) |
| **Ventana deslizante (mensajes)** | Mantiene los últimos N mensajes (predeterminado: 10) |
| **Ventana deslizante (tokens)** | Mantiene los mensajes que caben dentro de un límite de tokens (predeterminado: 4000) |

## Notas

- La memoria está limitada por espacio de trabajo: los flujos de trabajo en el mismo espacio de trabajo comparten el almacén de memoria
- Usa valores únicos de `conversationId` para mantener las conversaciones separadas (p. ej., IDs de sesión, IDs de usuario o UUIDs)
- Los mensajes del sistema pertenecen a la configuración del bloque de agente, no a la memoria
