---
title: ワークフローをMCPとしてデプロイ
description: 外部のAIアシスタントやアプリケーション向けに、ワークフローをMCPツールとして公開
---

import { Video } from '@/components/ui/video'
import { Callout } from 'fumadocs-ui/components/callout'

ワークフローをMCPツールとしてデプロイすることで、Claude Desktop、Cursor、その他のMCP互換クライアントなどの外部AIアシスタントからアクセス可能になります。これにより、ワークフローがどこからでも呼び出せる呼び出し可能なツールに変わります。

## MCPサーバーの作成と管理

MCPサーバーは、ワークフローツールをまとめてグループ化します。ワークスペース設定で作成と管理を行います。

<div className="mx-auto w-full overflow-hidden rounded-lg">
  <Video src="mcp/mcp-server.mp4" width={700} height={450} />
</div>

1. **設定 → MCP サーバー**に移動します
2. **サーバーを作成**をクリックします
3. 名前とオプションの説明を入力します
4. MCPクライアントで使用するためにサーバーURLをコピーします
5. サーバーに追加されたすべてのツールを表示および管理します

## ワークフローをツールとして追加

ワークフローがデプロイされたら、MCPツールとして公開できます。

<div className="mx-auto w-full overflow-hidden rounded-lg">
  <Video src="mcp/mcp-deploy-tool.mp4" width={700} height={450} />
</div>

1. デプロイ済みのワークフローを開く
2. **デプロイ**をクリックし、**MCP**タブに移動
3. ツール名と説明を設定
4. 各パラメータの説明を追加(AIが入力を理解するのに役立ちます)
5. 追加先のMCPサーバーを選択

<Callout type="info">
ワークフローをMCPツールとして追加する前に、デプロイしておく必要があります。
</Callout>

## ツールの設定

### ツール名
小文字、数字、アンダースコアを使用します。名前は説明的で、MCPの命名規則に従う必要があります(例: `search_documents`、`send_email`)。

### 説明
ツールが何をするのかを明確に説明します。これにより、AIアシスタントがツールをいつ使用すべきかを理解できます。

### パラメータ
ワークフローの入力形式フィールドがツールパラメータになります。AIアシスタントが正しい値を提供できるよう、各パラメータに説明を追加してください。

## MCPクライアントの接続

設定から取得したサーバーURLを使用して外部アプリケーションを接続します:

### Claude Desktop
Claude Desktopの設定ファイル(`~/Library/Application Support/Claude/claude_desktop_config.json`)に追加してください:

```json
{
  "mcpServers": {
    "my-sim-workflows": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "YOUR_SERVER_URL"]
    }
  }
}
```

### Cursor
同じmcp-remoteパターンを使用して、CursorのMCP設定にサーバーURLを追加してください。

<Callout type="warn">
mcp-remoteまたは他のHTTPベースのMCPトランスポートを使用する際は、認証アクセスのためにAPIキーヘッダー(`X-API-Key`)を含めてください。
</Callout>

## サーバー管理

**設定 → MCP サーバー**のサーバー詳細ビューから、次のことができます:

- **ツールを表示**: サーバーに追加されたすべてのワークフローを確認
- **URLをコピー**: MCPクライアント用のサーバーURLを取得
- **ワークフローを追加**: デプロイ済みワークフローをツールとして追加
- **ツールを削除**: サーバーからワークフローを削除
- **サーバーを削除**: サーバー全体とすべてのツールを削除

## 仕組み

MCPクライアントがツールを呼び出すと:

1. MCPサーバーURLでリクエストを受信
2. Simがリクエストを検証し、パラメータをワークフロー入力にマッピング
3. 提供された入力でデプロイ済みワークフローを実行
4. 結果をMCPクライアントに返却

ワークフローはAPI呼び出しと同じデプロイバージョンを使用して実行されるため、一貫した動作が保証されます。

## 必要な権限

| アクション | 必要な権限 |
|--------|-------------------|
| MCPサーバーを作成 | **管理者** |
| サーバーにワークフローを追加 | **書き込み**または**管理者** |
| MCPサーバーを表示 | **読み取り**、**書き込み**、または**管理者** |
| MCPサーバーを削除 | **管理者** |
