---
title: コスト計算
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Tab, Tabs } from 'fumadocs-ui/components/tabs'
import { Image } from '@/components/ui/image'

Simはすべてのワークフロー実行のコストを自動的に計算し、AIモデルの使用量と実行料金に基づいた透明な価格設定を提供します。これらのコストを理解することで、ワークフローを最適化し、予算を効果的に管理することができます。

## コストの計算方法

すべてのワークフロー実行には、次の2つのコスト要素が含まれます：

**基本実行料金**：1回の実行につき$0.001

**AIモデル使用料**：トークン消費量に基づく変動コスト

```javascript
modelCost = (inputTokens × inputPrice + outputTokens × outputPrice) / 1,000,000
totalCost = baseExecutionCharge + modelCost
```

<Callout type="info">
  AIモデルの価格は100万トークンあたりの金額です。実際のコストを算出するために1,000,000で割ります。AIブロックを使用しないワークフローは基本実行料金のみが発生します。
</Callout>

## ログでのモデル内訳

AIブロックを使用するワークフローでは、ログで詳細なコスト情報を確認できます：

<div className="flex justify-center">
  <Image
    src="/static/logs/logs-cost.png"
    alt="モデル内訳"
    width={600}
    height={400}
    className="my-6"
  />
</div>

モデル内訳には以下が表示されます：
- **トークン使用量**：各モデルの入力および出力トークン数
- **コスト内訳**：モデルごとおよび操作ごとの個別コスト
- **モデル分布**：使用されたモデルとその回数
- **総コスト**：ワークフロー実行全体の合計コスト

## 料金オプション

<Tabs items={['ホステッドモデル', '独自のAPIキーを使用']}>
  <Tab>
    **ホステッドモデル** - Simは、エージェントブロック用に1.4倍の価格乗数を適用したAPIキーを提供します:

    **OpenAI**
    | モデル | 基本価格（入力/出力） | ホステッド価格（入力/出力） |
    |-------|---------------------------|----------------------------|
    | GPT-5.1 | $1.25 / $10.00 | $1.75 / $14.00 |
    | GPT-5 | $1.25 / $10.00 | $1.75 / $14.00 |
    | GPT-5 Mini | $0.25 / $2.00 | $0.35 / $2.80 |
    | GPT-5 Nano | $0.05 / $0.40 | $0.07 / $0.56 |
    | GPT-4o | $2.50 / $10.00 | $3.50 / $14.00 |
    | GPT-4.1 | $2.00 / $8.00 | $2.80 / $11.20 |
    | GPT-4.1 Mini | $0.40 / $1.60 | $0.56 / $2.24 |
    | GPT-4.1 Nano | $0.10 / $0.40 | $0.14 / $0.56 |
    | o1 | $15.00 / $60.00 | $21.00 / $84.00 |
    | o3 | $2.00 / $8.00 | $2.80 / $11.20 |
    | o4 Mini | $1.10 / $4.40 | $1.54 / $6.16 |

    **Anthropic**
    | モデル | 基本価格（入力/出力） | ホステッド価格（入力/出力） |
    |-------|---------------------------|----------------------------|
    | Claude Opus 4.5 | $5.00 / $25.00 | $7.00 / $35.00 |
    | Claude Opus 4.1 | $15.00 / $75.00 | $21.00 / $105.00 |
    | Claude Sonnet 4.5 | $3.00 / $15.00 | $4.20 / $21.00 |
    | Claude Sonnet 4.0 | $3.00 / $15.00 | $4.20 / $21.00 |
    | Claude Haiku 4.5 | $1.00 / $5.00 | $1.40 / $7.00 |

    **Google**
    | モデル | 基本価格（入力/出力） | ホステッド価格（入力/出力） |
    |-------|---------------------------|----------------------------|
    | Gemini 3 Pro Preview | $2.00 / $12.00 | $2.80 / $16.80 |
    | Gemini 2.5 Pro | $1.25 / $10.00 | $1.75 / $14.00 |
    | Gemini 2.5 Flash | $0.30 / $2.50 | $0.42 / $3.50 |

    *1.4倍の乗数は、インフラストラクチャとAPI管理のコストをカバーします。*
  </Tab>

  <Tab>
    **独自のAPIキー** - 基本価格で任意のモデルを使用：

    | プロバイダー | モデル例 | 入力 / 出力 |
    |----------|----------------|----------------|
    | Deepseek | V3, R1 | $0.75 / $1.00 |
    | xAI | Grok 4 Latest, Grok 3 | $3.00 / $15.00 |
    | Groq | Llama 4 Scout, Llama 3.3 70B | $0.11 / $0.34 |
    | Cerebras | Llama 4 Scout, Llama 3.3 70B | $0.11 / $0.34 |
    | Ollama | ローカルモデル | 無料 |
    | VLLM | ローカルモデル | 無料 |

    *プロバイダーに直接支払い、マークアップなし*
  </Tab>
</Tabs>

<Callout type="warning">
  表示価格は2025年9月10日時点のレートを反映しています。最新の価格については各プロバイダーのドキュメントをご確認ください。
</Callout>

## Bring Your Own Key (BYOK)

ホストされたモデル（OpenAI、Anthropic、Google、Mistral）に対して、**設定 → BYOK**で独自のAPIキーを使用し、基本価格で支払うことができます。キーは暗号化され、ワークスペース全体に適用されます。

## コスト最適化戦略

- **モデルの選択**: タスクの複雑さに基づいてモデルを選択します。シンプルなタスクにはGPT-4.1-nanoを使用し、複雑な推論にはo1やClaude Opusが必要になる場合があります。
- **プロンプトエンジニアリング**: 適切に構造化された簡潔なプロンプトは、品質を犠牲にすることなくトークン使用量を削減します。
- **ローカルモデル**: 重要度の低いタスクにはOllamaやVLLMを使用して、APIコストを完全に排除します。
- **キャッシュと再利用**: 頻繁に使用される結果を変数やファイルに保存して、AIモデルの繰り返し呼び出しを回避します。
- **バッチ処理**: 個別の呼び出しを行うのではなく、単一のAIリクエストで複数のアイテムを処理します。

## 使用状況の監視

設定 → サブスクリプションで使用状況と請求を監視します:

- **現在の使用状況**: 現在の期間のリアルタイムの使用状況とコスト
- **使用制限**: 視覚的な進行状況インジケーター付きのプラン制限
- **請求詳細**: 予測される料金と最低コミットメント
- **プラン管理**: アップグレードオプションと請求履歴

### プログラムによる使用状況の追跡

APIを使用して、現在の使用状況と制限をプログラムでクエリできます:

**エンドポイント:**

```text
GET /api/users/me/usage-limits
```

**認証:**
- `X-API-Key`ヘッダーにAPIキーを含めます

**リクエスト例:**

```bash
curl -X GET -H "X-API-Key: YOUR_API_KEY" -H "Content-Type: application/json" https://sim.ai/api/users/me/usage-limits
```

**レスポンス例:**

```json
{
  "success": true,
  "rateLimit": {
    "sync": {
      "isLimited": false,
      "requestsPerMinute": 25,
      "maxBurst": 50,
      "remaining": 50,
      "resetAt": "2025-09-08T22:51:55.999Z"
    },
    "async": {
      "isLimited": false,
      "requestsPerMinute": 200,
      "maxBurst": 400,
      "remaining": 400,
      "resetAt": "2025-09-08T22:51:56.155Z"
    },
    "authType": "api"
  },
  "usage": {
    "currentPeriodCost": 12.34,
    "limit": 100,
    "plan": "pro"
  }
}
```

**レート制限フィールド:**
- `requestsPerMinute`: 持続的なレート制限（トークンはこのレートで補充されます）
- `maxBurst`: 蓄積できる最大トークン数（バースト容量）
- `remaining`: 現在利用可能なトークン数（最大`maxBurst`まで）

**レスポンスフィールド:**
- `currentPeriodCost`は現在の請求期間の使用状況を反映します
- `limit`は個別の制限（Free/Pro）またはプールされた組織の制限（Team/Enterprise）から導出されます
- `plan`はユーザーに関連付けられた最も優先度の高いアクティブなプランです

## プランの制限

サブスクリプションプランによって、使用量の制限が異なります。

| プラン | 月間使用量制限 | レート制限（1分あたり） |
|------|-------------------|-------------------------|
| **無料** | $20 | 同期5、非同期10 |
| **プロ** | $100 | 同期10、非同期50 |
| **チーム** | $500（プール） | 同期50、非同期100 |
| **エンタープライズ** | カスタム | カスタム |

## 課金モデル

Simは**基本サブスクリプション + 超過料金**の課金モデルを採用しています。

### 仕組み

**プロプラン（月額$20）：**
- 月額サブスクリプションには$20分の使用量が含まれます
- 使用量が$20未満 → 追加料金なし
- 使用量が$20超過 → 月末に超過分を支払い
- 例：使用量$35 = $20（サブスクリプション）+ $15（超過料金）

**チームプラン（1席あたり月額$40）：**
- チームメンバー全員で使用量をプール
- チーム全体の使用量から超過料金を計算
- 組織のオーナーが1つの請求書を受け取ります

**エンタープライズプラン：**
- 固定月額料金、超過料金なし
- 契約に基づくカスタム使用量制限

### しきい値課金

未請求の超過料金が$50に達すると、Simは未請求金額の全額を自動的に請求します。

**例：**
- 10日目：超過料金$70 → 即座に$70を請求
- 15日目：追加使用量$35（合計$105） → すでに請求済み、アクションなし
- 20日目：さらに$50の使用量（合計$155、未請求$85） → 即座に$85を請求

これにより、期間終了時の1回の大きな請求ではなく、大きな超過料金を月全体に分散させることができます。

## コスト管理のベストプラクティス

1. **定期的な監視**：予期しない事態を避けるため、使用状況ダッシュボードを頻繁に確認してください
2. **予算の設定**：プランの制限を支出のガードレールとして使用してください
3. **ワークフローの最適化**：コストの高い実行を確認し、プロンプトやモデルの選択を最適化してください
4. **適切なモデルの使用**：タスクの要件に合わせてモデルの複雑さを選択してください
5. **類似タスクのバッチ処理**：可能な限り複数のリクエストを組み合わせて、オーバーヘッドを削減してください

## 次のステップ

- [設定 → サブスクリプション](https://sim.ai/settings/subscription)で現在の使用状況を確認する
- 実行の詳細を追跡するための[ログ記録](/execution/logging)について学ぶ
- プログラムによるコスト監視のための[外部API](/execution/api)を探索する
- コストを削減するための[ワークフロー最適化テクニック](/blocks)を確認する