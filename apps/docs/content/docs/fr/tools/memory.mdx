---
title: Mémoire
description: Stocker et récupérer l'historique des conversations
---

import { BlockInfoCard } from "@/components/ui/block-info-card"

<BlockInfoCard 
  type="memory"
  color="#F64F9E"
/>

## Vue d'ensemble

Le bloc Memory stocke l'historique des conversations pour les agents. Chaque mémoire est identifiée par un `conversationId` que vous fournissez. Plusieurs agents peuvent partager la même mémoire en utilisant le même `conversationId`.

Memory stocke uniquement les messages utilisateur et assistant. Les messages système ne sont pas stockés — ils sont configurés dans le bloc Agent et préfixés à l'exécution.

## Outils

### `memory_add`

Ajouter un message à la mémoire. Crée une nouvelle mémoire si le `conversationId` n'existe pas, ou ajoute à la mémoire existante.

#### Entrée

| Paramètre | Type | Obligatoire | Description |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | chaîne | Oui | Identifiant unique pour la conversation (par ex., `user-123`, `session-abc`) |
| `role` | chaîne | Oui | Rôle du message : `user` ou `assistant` |
| `content` | chaîne | Oui | Contenu du message |

#### Sortie

| Paramètre | Type | Description |
| --------- | ---- | ----------- |
| `success` | booléen | Indique si l'opération a réussi |
| `memories` | tableau | Tableau de mémoire mis à jour |
| `error` | chaîne | Message d'erreur en cas d'échec |

### `memory_get`

Récupérer la mémoire par identifiant de conversation.

#### Entrée

| Paramètre | Type | Obligatoire | Description |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | chaîne | Oui | Identifiant de conversation |

#### Sortie

| Paramètre | Type | Description |
| --------- | ---- | ----------- |
| `success` | booléen | Indique si l'opération a réussi |
| `memories` | tableau | Tableau de messages avec `role` et `content` |
| `error` | chaîne | Message d'erreur en cas d'échec |

### `memory_get_all`

Récupérer toutes les mémoires pour l'espace de travail actuel.

#### Sortie

| Paramètre | Type | Description |
| --------- | ---- | ----------- |
| `success` | boolean | Indique si l'opération a réussi |
| `memories` | array | Tous les objets de mémoire avec les champs `conversationId` et `data` |
| `error` | string | Message d'erreur si l'opération a échoué |

### `memory_delete`

Supprimer la mémoire par ID de conversation.

#### Entrée

| Paramètre | Type | Obligatoire | Description |
| --------- | ---- | ----------- | ----------- |
| `conversationId` | string | Oui | Identifiant de conversation à supprimer |

#### Sortie

| Paramètre | Type | Description |
| --------- | ---- | ----------- |
| `success` | boolean | Indique si l'opération a réussi |
| `message` | string | Message de confirmation |
| `error` | string | Message d'erreur si l'opération a échoué |

## Types de mémoire d'agent

Lors de l'utilisation de la mémoire avec un bloc Agent, vous pouvez configurer la manière dont l'historique de conversation est géré :

| Type | Description |
| ---- | ----------- |
| **Conversation complète** | Stocke tous les messages, limité par la fenêtre de contexte du modèle (utilise 90 % pour laisser de la place pour la réponse) |
| **Fenêtre glissante (messages)** | Conserve les N derniers messages (par défaut : 10) |
| **Fenêtre glissante (tokens)** | Conserve les messages qui tiennent dans une limite de tokens (par défaut : 4000) |

## Remarques

- La mémoire est limitée par espace de travail — les workflows dans le même espace de travail partagent le stockage de mémoire
- Utilisez des valeurs `conversationId` uniques pour garder les conversations séparées (par ex., ID de session, ID d'utilisateur ou UUID)
- Les messages système appartiennent à la configuration du bloc Agent, pas à la mémoire
