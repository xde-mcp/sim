---
title: 1Password
description: 在 1Password 保险库中管理机密和条目
---

import { BlockInfoCard } from "@/components/ui/block-info-card"

<BlockInfoCard 
  type="onepassword"
  color="#E0E0E0"
/>

{/* MANUAL-CONTENT-START:intro */}
[1Password](https://1password.com) 是一款备受信赖的密码管理器和机密信息保险库解决方案，帮助个人和团队安全地存储、访问和共享密码、API 凭证及敏感信息。它具备强大的加密机制、细致的访问控制，并可在多设备间无缝同步，助力团队和组织高效且安全地管理机密。

[1Password Connect API](https://developer.1password.com/docs/connect/) 允许以编程方式访问组织 1Password 账户中的保险库和条目。通过在 Sim 中集成该 API，您可以自动化机密获取、入职流程、机密轮换、保险库审计等操作，所有流程都安全且可审计。

在 Sim 工作流中使用 1Password，您可以：

- **列出、搜索和检索保险库**：访问元数据或浏览可用保险库，按项目或用途组织机密
- **获取条目和机密**：实时获取凭证、API 密钥或自定义机密，为您的工作流安全赋能
- **创建、更新或删除机密**：自动化机密管理、配置和轮换，提升安全实践
- **集成 CI/CD 与自动化**：仅在需要时获取凭证或令牌，减少手动操作并降低风险
- **确保访问控制**：利用基于角色的访问和精细权限，控制哪些代理或用户可访问特定机密

将 Sim 与 1Password 连接后，您可以让代理安全地管理机密，减少手动操作负担，并保持安全自动化、事件响应和 DevOps 工作流的最佳实践——同时确保机密始终处于受控环境中。
{/* MANUAL-CONTENT-END */}

## 使用说明

通过 Connect API 或 Service Account SDK 访问和管理存储在 1Password 保险库中的机密。可以列出保险库、获取包含字段和机密的条目、创建新条目、更新现有条目、删除条目，并解析机密引用。

## 工具

### `onepassword_list_vaults`

列出所有可通过 Connect 令牌或 Service Account 访问的保险库

#### 输入

| 参数 | 类型 | 必填 | 说明 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account 令牌（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API 令牌（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `filter` | string | 否 | SCIM 过滤表达式（例如，name eq "My Vault"） |

#### 输出

| 参数 | 类型 | 说明 |
| --------- | ---- | ----------- |
| `vaults` | array | 可访问的保险库列表 |
|   ↳ `id` | string | 保险库 ID |
|   ↳ `name` | string | 保险库名称 |
|   ↳ `description` | string | 保险库描述 |
|   ↳ `attributeVersion` | number | 保险库属性版本 |
|   ↳ `contentVersion` | number | 保险库内容版本 |
|   ↳ `type` | string | 保险库类型（USER_CREATED、PERSONAL、EVERYONE、TRANSFER） |
|   ↳ `createdAt` | string | 创建时间戳 |
|   ↳ `updatedAt` | string | 最后更新时间戳 |

### `onepassword_get_vault`

通过 ID 获取指定保险库的详细信息

#### 输入

| 参数 | 类型 | 是否必填 | 说明 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account token（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API token（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `vaultId` | string | 是 | 保险库 UUID |

#### 输出

| 参数 | 类型 | 说明 |
| --------- | ---- | ----------- |
| `id` | string | 保险库 ID |
| `name` | string | 保险库名称 |
| `description` | string | 保险库描述 |
| `attributeVersion` | number | 保险库属性版本 |
| `contentVersion` | number | 保险库内容版本 |
| `items` | number | 保险库中的项目数量 |
| `type` | string | 保险库类型（USER_CREATED、PERSONAL、EVERYONE、TRANSFER） |
| `createdAt` | string | 创建时间戳 |
| `updatedAt` | string | 最后更新时间戳 |

### `onepassword_list_items`

列出保险库中的项目，仅返回不含字段值的摘要信息。

#### 输入

| 参数 | 类型 | 是否必填 | 说明 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account token（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API token（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `vaultId` | string | 是 | 要列出项目的保险库 UUID |
| `filter` | string | 否 | SCIM 过滤表达式（如：title eq "API Key" 或 tag eq "production"） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `items` | array | 保管库中的项目列表（仅摘要，无字段值） |
|   ↳ `id` | string | 项目 ID |
|   ↳ `title` | string | 项目标题 |
|   ↳ `vault` | object | 保管库引用 |
|     ↳ `id` | string | 保管库 ID |
|   ↳ `category` | string | 项目类别（如 LOGIN、API_CREDENTIAL） |
|   ↳ `urls` | array | 与项目关联的 URL |
|     ↳ `href` | string | URL |
|     ↳ `label` | string | URL 标签 |
|     ↳ `primary` | boolean | 是否为主 URL |
|   ↳ `favorite` | boolean | 是否为收藏项目 |
|   ↳ `tags` | array | 项目标签 |
|   ↳ `version` | number | 项目版本号 |
|   ↳ `state` | string | 项目状态（ARCHIVED 或 DELETED） |
|   ↳ `createdAt` | string | 创建时间戳 |
|   ↳ `updatedAt` | string | 最后更新时间戳 |
|   ↳ `lastEditedBy` | string | 最后编辑者的 ID |

### `onepassword_get_item`

获取项目的完整详情，包括所有字段和密钥

#### 输入

| 参数 | 类型 | 是否必填 | 描述 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account 令牌（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API 令牌（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `vaultId` | string | 是 | 保管库 UUID |
| `itemId` | string | 是 | 要检索的项目 UUID |

#### 输出

| 参数 | 类型 | 说明 |
| --------- | ---- | ----------- |
| `response` | json | 操作响应数据 |

### `onepassword_create_item`

在保险库中创建新项目

#### 输入

| 参数 | 类型 | 是否必填 | 说明 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account 令牌（用于 Service Account 模式）|
| `apiKey` | string | 否 | 1Password Connect API 令牌（用于 Connect Server 模式）|
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式）|
| `vaultId` | string | 是 | 要创建项目的保险库 UUID |
| `category` | string | 是 | 项目类别（如 LOGIN、PASSWORD、API_CREDENTIAL、SECURE_NOTE、SERVER、DATABASE）|
| `title` | string | 否 | 项目标题 |
| `tags` | string | 否 | 以逗号分隔的标签列表 |
| `fields` | string | 否 | 字段对象的 JSON 数组（如 [ {"label":"username","value":"admin","type":"STRING","purpose":"USERNAME"} ] ）|

#### 输出

| 参数 | 类型 | 说明 |
| --------- | ---- | ----------- |
| `response` | json | 操作响应数据 |

### `onepassword_replace_item`

用新数据替换整个项目（完全更新）

#### 输入

| 参数 | 类型 | 是否必填 | 说明 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account 令牌（用于 Service Account 模式）|
| `apiKey` | string | 否 | 1Password Connect API 令牌（用于 Connect Server 模式）|
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式）|
| `vaultId` | string | 是 | 保险库 UUID |
| `itemId` | string | 是 | 要替换的项目 UUID |
| `item` | string | 是 | 表示完整项目的 JSON 对象（如 {"vault":{"id":"..."},"category":"LOGIN","title":"My Item","fields":[...]} ）|

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `response` | json | 操作响应数据 |

### `onepassword_update_item`

使用 JSON Patch 操作（RFC6902）更新现有条目

#### 输入

| 参数 | 类型 | 是否必填 | 描述 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account token（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API token（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `vaultId` | string | 是 | 保管库 UUID |
| `itemId` | string | 是 | 要更新的条目 UUID |
| `operations` | string | 是 | RFC6902 patch 操作的 JSON 数组（例如，[{"op":"replace","path":"/title","value":"New Title"}]） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `response` | json | 操作响应数据 |

### `onepassword_delete_item`

从保管库中删除条目

#### 输入

| 参数 | 类型 | 是否必填 | 描述 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式："service_account" 或 "connect" |
| `serviceAccountToken` | string | 否 | 1Password Service Account token（用于 Service Account 模式） |
| `apiKey` | string | 否 | 1Password Connect API token（用于 Connect Server 模式） |
| `serverUrl` | string | 否 | 1Password Connect 服务器 URL（用于 Connect Server 模式） |
| `vaultId` | string | 是 | 保管库 UUID |
| `itemId` | string | 是 | 要删除的条目 UUID |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `success` | boolean | 是否已成功删除该项 |

### `onepassword_resolve_secret`

解析密钥引用（op://vault/item/field）为其对应的值。仅限 Service Account 模式。

#### 输入

| 参数 | 类型 | 是否必填 | 描述 |
| --------- | ---- | -------- | ----------- |
| `connectionMode` | string | 否 | 连接模式：此操作必须为 "service_account" |
| `serviceAccountToken` | string | 是 | 1Password Service Account 令牌 |
| `secretReference` | string | 是 | 密钥引用 URI（例如，op://vault-name/item-name/field-name 或 op://vault-name/item-name/section-name/field-name） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `value` | string | 已解析的密钥值 |
| `reference` | string | 原始密钥引用 URI |
