---
title: Stripe
description: 处理支付并管理 Stripe 数据
---

import { BlockInfoCard } from "@/components/ui/block-info-card"

<BlockInfoCard 
  type="stripe"
  color="#635BFF"
  icon={true}
  iconSvg={`<svg className="block-icon"
      
      
      
      viewBox='0 0 360 151'
      fill='none'
      xmlns='http://www.w3.org/2000/svg'
    >
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M360 78.0002C360 52.4002 347.6 32.2002 323.9 32.2002C300.1 32.2002 285.7 52.4002 285.7 77.8002C285.7 107.9 302.7 123.1 327.1 123.1C339 123.1 348 120.4 354.8 116.6V96.6002C348 100 340.2 102.1 330.3 102.1C320.6 102.1 312 98.7002 310.9 86.9002H359.8C359.8 85.6002 360 80.4002 360 78.0002ZM310.6 68.5002C310.6 57.2002 317.5 52.5002 323.8 52.5002C329.9 52.5002 336.4 57.2002 336.4 68.5002H310.6Z'
        fill='white'
      />
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M247.1 32.2002C237.3 32.2002 231 36.8002 227.5 40.0002L226.2 33.8002H204.2V150.4L229.2 145.1L229.3 116.8C232.9 119.4 238.2 123.1 247 123.1C264.9 123.1 281.2 108.7 281.2 77.0002C281.1 48.0002 264.6 32.2002 247.1 32.2002ZM241.1 101.1C235.2 101.1 231.7 99.0002 229.3 96.4002L229.2 59.3002C231.8 56.4002 235.4 54.4002 241.1 54.4002C250.2 54.4002 256.5 64.6002 256.5 77.7002C256.5 91.1002 250.3 101.1 241.1 101.1Z'
        fill='white'
      />
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M169.8 26.3001L194.9 20.9001V0.600098L169.8 5.9001V26.3001Z'
        fill='white'
      />
      <path d='M194.9 33.9001H169.8V121.4H194.9V33.9001Z' fill='white' />
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M142.9 41.3001L141.3 33.9001H119.7V121.4H144.7V62.1001C150.6 54.4001 160.6 55.8001 163.7 56.9001V33.9001C160.5 32.7001 148.8 30.5001 142.9 41.3001Z'
        fill='white'
      />
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M92.8999 12.2002L68.4999 17.4002L68.3999 97.5002C68.3999 112.3 79.4999 123.2 94.2999 123.2C102.5 123.2 108.5 121.7 111.8 119.9V99.6002C108.6 100.9 92.7999 105.5 92.7999 90.7002V55.2002H111.8V33.9002H92.7999L92.8999 12.2002Z'
        fill='white'
      />
      <path
        fillRule='evenodd'
        clipRule='evenodd'
        d='M25.3 59.3002C25.3 55.4002 28.5 53.9002 33.8 53.9002C41.4 53.9002 51 56.2002 58.6 60.3002V36.8002C50.3 33.5002 42.1 32.2002 33.8 32.2002C13.5 32.2002 0 42.8002 0 60.5002C0 88.1002 38 83.7002 38 95.6002C38 100.2 34 101.7 28.4 101.7C20.1 101.7 9.5 98.3002 1.1 93.7002V117.5C10.4 121.5 19.8 123.2 28.4 123.2C49.2 123.2 63.5 112.9 63.5 95.0002C63.4 65.2002 25.3 70.5002 25.3 59.3002Z'
        fill='white'
      />
    </svg>`}
/>

## 使用说明

将 Stripe 集成到工作流程中。管理支付意图、客户、订阅、发票、收费、产品、价格和事件。可以在触发模式下使用，当发生 Stripe 事件时触发工作流程。

## 工具

### `stripe_create_payment_intent`

创建一个新的 Payment Intent 以处理支付

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `amount` | number | 是 | 金额（以分为单位，例如 2000 表示 $20.00） |
| `currency` | string | 是 | 三字母 ISO 货币代码（例如 usd, eur） |
| `customer` | string | 否 | 要与此支付关联的客户 ID |
| `payment_method` | string | 否 | 支付方式 ID |
| `description` | string | 否 | 支付描述 |
| `receipt_email` | string | 否 | 用于发送收据的电子邮件地址 |
| `metadata` | json | 否 | 用于存储附加信息的键值对集合 |
| `automatic_payment_methods` | json | 否 | 启用自动支付方式（例如，\{"enabled": true\}） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 创建的 Payment Intent 对象 |
| `metadata` | json | Payment Intent 元数据，包括 ID、状态、金额和货币 |

### `stripe_retrieve_payment_intent`

通过 ID 检索现有的 Payment Intent

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `id` | string | 是 | Payment Intent ID（例如，pi_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 检索到的 Payment Intent 对象 |
| `metadata` | json | 包含 ID、状态、金额和货币的 Payment Intent 元数据 |

### `stripe_update_payment_intent`

更新现有的 Payment Intent

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | Payment Intent ID（例如，pi_1234567890） |
| `amount` | number | 否 | 更新后的金额（以分为单位） |
| `currency` | string | 否 | 三字母 ISO 货币代码 |
| `customer` | string | 否 | 客户 ID |
| `description` | string | 否 | 更新后的描述 |
| `metadata` | json | 否 | 更新后的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 更新后的 Payment Intent 对象 |
| `metadata` | json | 包含 ID、状态、金额和货币的 Payment Intent 元数据 |

### `stripe_confirm_payment_intent`

确认 Payment Intent 以完成支付

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | Payment Intent ID（例如，pi_1234567890） |
| `payment_method` | string | 否 | 用于确认的支付方式 ID |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 确认的 Payment Intent 对象 |
| `metadata` | json | 包含 ID、状态、金额和货币的 Payment Intent 元数据 |

### `stripe_capture_payment_intent`

捕获已授权的 Payment Intent

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `id` | string | 是 | Payment Intent ID（例如，pi_1234567890） |
| `amount_to_capture` | number | 否 | 要捕获的金额（以分为单位，默认为全额） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 捕获的 Payment Intent 对象 |
| `metadata` | json | 包含 ID、状态、金额和货币的 Payment Intent 元数据 |

### `stripe_cancel_payment_intent`

取消 Payment Intent

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `id` | string | 是 | Payment Intent ID（例如，pi_1234567890） |
| `cancellation_reason` | string | 否 | 取消原因（duplicate、fraudulent、requested_by_customer、abandoned） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intent` | json | 已取消的 Payment Intent 对象 |
| `metadata` | json | 包含 ID、状态、金额和货币的 Payment Intent 元数据 |

### `stripe_list_payment_intents`

列出所有 Payment Intents

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `customer` | string | 否 | 按客户 ID 过滤 |
| `created` | json | 否 | 按创建日期过滤（例如，\{"gt": 1633024800\}） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intents` | json | Payment Intent 对象数组 |
| `metadata` | json | 包含计数和 has_more 的列表元数据 |

### `stripe_search_payment_intents`

使用查询语法搜索 Payment Intents

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `query` | string | 是 | 搜索查询（例如，"status:'succeeded' AND currency:'usd'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `payment_intents` | json | 匹配的 Payment Intent 对象数组 |
| `metadata` | json | 包含计数和 has_more 的搜索元数据 |

### `stripe_create_customer`

创建一个新的客户对象

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（secret key） |
| `email` | string | 否 | 客户电子邮件地址 |
| `name` | string | 否 | 客户全名 |
| `phone` | string | 否 | 客户电话号码 |
| `description` | string | 否 | 客户描述 |
| `address` | json | 否 | 客户地址对象 |
| `metadata` | json | 否 | 键值对集合 |
| `payment_method` | string | 否 | 要附加的支付方式 ID |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `customer` | json | 创建的客户对象 |
| `metadata` | json | 客户元数据 |

### `stripe_retrieve_customer`

通过 ID 检索现有客户

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥 \(秘密密钥\) |
| `id` | string | 是 | 客户 ID \(例如，cus_1234567890\) |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `customer` | json | 检索到的客户对象 |
| `metadata` | json | 客户元数据 |

### `stripe_update_customer`

更新现有客户

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥 \(秘密密钥\) |
| `id` | string | 是 | 客户 ID \(例如，cus_1234567890\) |
| `email` | string | 否 | 更新的电子邮件地址 |
| `name` | string | 否 | 更新的姓名 |
| `phone` | string | 否 | 更新的电话号码 |
| `description` | string | 否 | 更新的描述 |
| `address` | json | 否 | 更新的地址对象 |
| `metadata` | json | 否 | 更新的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `customer` | json | 更新的客户对象 |
| `metadata` | json | 客户元数据 |

### `stripe_delete_customer`

永久删除客户

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 客户 ID（例如，cus_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `deleted` | boolean | 客户是否已被删除 |
| `id` | string | 已删除客户的 ID |
| `metadata` | json | 删除的元数据 |

### `stripe_list_customers`

列出所有客户

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `email` | string | 否 | 按电子邮件地址筛选 |
| `created` | json | 否 | 按创建日期筛选 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `customers` | json | 客户对象数组 |
| `metadata` | json | 列表元数据 |

### `stripe_search_customers`

使用查询语法搜索客户

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `query` | string | 是 | 搜索查询（例如，"email:'customer@example.com'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `customers` | json | 匹配的客户对象数组 |
| `metadata` | json | 搜索元数据 |

### `stripe_create_subscription`

为客户创建一个新的订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `customer` | string | 是 | 要订阅的客户 ID |
| `items` | json | 是 | 包含价格 ID 的项目数组（例如，\[\{"price": "price_xxx", "quantity": 1\}\]） |
| `trial_period_days` | number | 否 | 试用天数 |
| `default_payment_method` | string | 否 | 支付方式 ID |
| `cancel_at_period_end` | boolean | 否 | 在周期结束时取消订阅 |
| `metadata` | json | 否 | 用于存储附加信息的键值对集合 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscription` | json | 创建的订阅对象 |
| `metadata` | json | 包括 ID、状态和客户的订阅元数据 |

### `stripe_retrieve_subscription`

通过 ID 检索现有订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 订阅 ID（例如，sub_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscription` | json | 检索到的订阅对象 |
| `metadata` | json | 包括 ID、状态和客户的订阅元数据 |

### `stripe_update_subscription`

更新现有订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 订阅 ID（例如，sub_1234567890） |
| `items` | json | 否 | 包含价格 ID 的更新项目数组 |
| `cancel_at_period_end` | boolean | 否 | 是否在周期结束时取消订阅 |
| `metadata` | json | 否 | 更新的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscription` | json | 更新后的订阅对象 |
| `metadata` | json | 包括 ID、状态和客户的订阅元数据 |

### `stripe_cancel_subscription`

取消订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 订阅 ID（例如，sub_1234567890） |
| `prorate` | boolean | 否 | 是否按比例取消 |
| `invoice_now` | boolean | 否 | 是否立即开具发票 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscription` | json | 已取消的订阅对象 |
| `metadata` | json | 包括 ID、状态和客户的订阅元数据 |

### `stripe_resume_subscription`

恢复计划取消的订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 订阅 ID（例如，sub_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscription` | json | 恢复的订阅对象 |
| `metadata` | json | 包括 ID、状态和客户的订阅元数据 |

### `stripe_list_subscriptions`

列出所有订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `customer` | string | 否 | 按客户 ID 过滤 |
| `status` | string | 否 | 按状态过滤（active, past_due, unpaid, canceled, incomplete, incomplete_expired, trialing, all） |
| `price` | string | 否 | 按价格 ID 过滤 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscriptions` | json | 订阅对象数组 |
| `metadata` | json | 列表元数据 |

### `stripe_search_subscriptions`

使用查询语法搜索订阅

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `query` | string | 是 | 搜索查询（例如，"status:'active' AND customer:'cus_xxx'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `subscriptions` | json | 匹配的订阅对象数组 |
| `metadata` | json | 搜索元数据 |

### `stripe_create_invoice`

创建新发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `customer` | string | 是 | 客户 ID（例如，cus_1234567890） |
| `description` | string | 否 | 发票描述 |
| `metadata` | json | 否 | 键值对集合 |
| `auto_advance` | boolean | 否 | 自动完成发票 |
| `collection_method` | string | 否 | 收款方式：charge_automatically 或 send_invoice |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 创建的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_retrieve_invoice`

通过 ID 检索现有发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 发票 ID（例如，in_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 检索到的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_update_invoice`

更新现有发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |
| `description` | string | 否 | 发票描述 |
| `metadata` | json | 否 | 键值对集合 |
| `auto_advance` | boolean | 否 | 自动完成发票 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 更新后的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_delete_invoice`

永久删除草稿发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `deleted` | boolean | 发票是否已删除 |
| `id` | string | 已删除发票的 ID |
| `metadata` | json | 删除元数据 |

### `stripe_finalize_invoice`

完成草稿发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |
| `auto_advance` | boolean | 否 | 自动推进发票 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 最终的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_pay_invoice`

支付发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（私钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |
| `paid_out_of_band` | boolean | 否 | 将发票标记为带外支付 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 已支付的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_void_invoice`

作废发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（私钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 已作废的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_send_invoice`

向客户发送发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（私钥） |
| `id` | string | 是 | 发票 ID（例如：in_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoice` | json | 发送的发票对象 |
| `metadata` | json | 发票元数据 |

### `stripe_list_invoices`

列出所有发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `customer` | string | 否 | 按客户 ID 过滤 |
| `status` | string | 否 | 按发票状态过滤 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoices` | json | 发票对象数组 |
| `metadata` | json | 列表元数据 |

### `stripe_search_invoices`

使用查询语法搜索发票

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `query` | string | 是 | 搜索查询（例如："customer:\'cus_1234567890\'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `invoices` | json | 匹配的发票对象数组 |
| `metadata` | json | 搜索元数据 |

### `stripe_create_charge`

创建一个新的收费以处理付款

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `amount` | number | 是 | 金额（以分为单位，例如 2000 表示 $20.00） |
| `currency` | string | 是 | 三字母 ISO 货币代码（例如 usd, eur） |
| `customer` | string | 否 | 要与此收费关联的客户 ID |
| `source` | string | 否 | 支付来源 ID（例如，卡片令牌或已保存的卡片 ID） |
| `description` | string | 否 | 收费描述 |
| `metadata` | json | 否 | 用于存储附加信息的键值对集合 |
| `capture` | boolean | 否 | 是否立即捕获收费（默认为 true） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charge` | json | 创建的收费对象 |
| `metadata` | json | 收费元数据，包括 ID、状态、金额、货币和支付状态 |

### `stripe_retrieve_charge`

通过 ID 检索现有收费

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 收费 ID（例如 ch_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charge` | json | 检索到的收费对象 |
| `metadata` | json | 收费元数据，包括 ID、状态、金额、货币和支付状态 |

### `stripe_update_charge`

更新现有的收费

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 收费 ID（例如，ch_1234567890） |
| `description` | string | 否 | 更新的描述 |
| `metadata` | json | 否 | 更新的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charge` | json | 更新后的收费对象 |
| `metadata` | json | 包括 ID、状态、金额、货币和支付状态的收费元数据 |

### `stripe_capture_charge`

捕获未捕获的收费

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 收费 ID（例如，ch_1234567890） |
| `amount` | number | 否 | 捕获的金额（以分为单位，默认为全额） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charge` | json | 捕获的收费对象 |
| `metadata` | json | 包括 ID、状态、金额、货币和支付状态的收费元数据 |

### `stripe_list_charges`

列出所有收费

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `limit` | number | 否 | 返回结果的数量（默认 10，最大 100） |
| `customer` | string | 否 | 按客户 ID 过滤 |
| `created` | json | 否 | 按创建日期过滤（例如，\{"gt": 1633024800\}） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charges` | json | Charge 对象的数组 |
| `metadata` | json | 包括计数和 has_more 的列表元数据 |

### `stripe_search_charges`

使用查询语法搜索收费记录

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `query` | string | 是 | 搜索查询（例如，\"status:'succeeded' AND currency:'usd'\"） |
| `limit` | number | 否 | 返回结果的数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `charges` | json | 匹配的 Charge 对象的数组 |
| `metadata` | json | 包括计数和 has_more 的搜索元数据 |

### `stripe_create_product`

创建一个新的产品对象

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `name` | string | 是 | 产品名称 |
| `description` | string | 否 | 产品描述 |
| `active` | boolean | 否 | 产品是否为激活状态 |
| `images` | json | 否 | 产品的图片 URL 数组 |
| `metadata` | json | 否 | 键值对集合 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `product` | json | 创建的产品对象 |
| `metadata` | json | 产品元数据 |

### `stripe_retrieve_product`

通过 ID 检索现有产品

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 产品 ID（例如，prod_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `product` | json | 检索到的产品对象 |
| `metadata` | json | 产品元数据 |

### `stripe_update_product`

更新现有产品

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 产品 ID（例如，prod_1234567890） |
| `name` | string | 否 | 更新的产品名称 |
| `description` | string | 否 | 更新的产品描述 |
| `active` | boolean | 否 | 更新的激活状态 |
| `images` | json | 否 | 更新的图片 URL 数组 |
| `metadata` | json | 否 | 更新的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `product` | json | 更新的产品对象 |
| `metadata` | json | 产品元数据 |

### `stripe_delete_product`

永久删除产品

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 产品 ID（例如，prod_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `deleted` | boolean | 产品是否已删除 |
| `id` | string | 已删除产品的 ID |
| `metadata` | json | 删除的元数据 |

### `stripe_list_products`

列出所有产品

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `active` | boolean | 否 | 按活动状态筛选 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `products` | json | 产品对象数组 |
| `metadata` | json | 列表元数据 |

### `stripe_search_products`

使用查询语法搜索产品

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `query` | string | 是 | 搜索查询（例如，"name:\'shirt\'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `products` | json | 匹配的产品对象数组 |
| `metadata` | json | 搜索元数据 |

### `stripe_create_price`

为产品创建一个新的价格

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `product` | string | 是 | 产品 ID（例如，prod_1234567890） |
| `currency` | string | 是 | 三字母 ISO 货币代码（例如，usd, eur） |
| `unit_amount` | number | 否 | 金额（以分为单位，例如，1000 表示 $10.00） |
| `recurring` | json | 否 | 循环计费配置（间隔：天/周/月/年） |
| `metadata` | json | 否 | 键值对集合 |
| `billing_scheme` | string | 否 | 计费方案（per_unit 或 tiered） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `price` | json | 创建的价格对象 |
| `metadata` | json | 价格元数据 |

### `stripe_retrieve_price`

通过 ID 检索现有价格

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 价格 ID（例如，price_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `price` | json | 检索到的价格对象 |
| `metadata` | json | 价格元数据 |

### `stripe_update_price`

更新现有价格

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `id` | string | 是 | 价格 ID（例如，price_1234567890） |
| `active` | boolean | 否 | 价格是否激活 |
| `metadata` | json | 否 | 更新的元数据 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `price` | json | 更新后的价格对象 |
| `metadata` | json | 价格元数据 |

### `stripe_list_prices`

列出所有价格

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `product` | string | 否 | 按产品 ID 过滤 |
| `active` | boolean | 否 | 按激活状态过滤 |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `prices` | json | 价格对象数组 |
| `metadata` | json | 列表元数据 |

### `stripe_search_prices`

使用查询语法搜索价格

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（秘密密钥） |
| `query` | string | 是 | 搜索查询（例如，"active:'true' AND currency:'usd'"） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `prices` | json | 匹配价格对象的数组 |
| `metadata` | json | 搜索元数据 |

### `stripe_retrieve_event`

通过 ID 检索现有事件

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `id` | string | 是 | 事件 ID（例如，evt_1234567890） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `event` | json | 检索到的事件对象 |
| `metadata` | json | 包括 ID、类型和创建时间戳的事件元数据 |

### `stripe_list_events`

列出所有事件

#### 输入

| 参数 | 类型 | 必需 | 描述 |
| --------- | ---- | -------- | ----------- |
| `apiKey` | string | 是 | Stripe API 密钥（密钥） |
| `limit` | number | 否 | 返回结果数量（默认 10，最大 100） |
| `type` | string | 否 | 按事件类型过滤（例如，payment_intent.created） |
| `created` | json | 否 | 按创建日期过滤（例如，\{"gt": 1633024800\}） |

#### 输出

| 参数 | 类型 | 描述 |
| --------- | ---- | ----------- |
| `events` | json | 事件对象的数组 |
| `metadata` | json | 列表元数据，包括计数和 has_more |

## 注意事项

- 分类：`tools`
- 类型：`stripe`
