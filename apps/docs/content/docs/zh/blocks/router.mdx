---
title: 路由器
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Tab, Tabs } from 'fumadocs-ui/components/tabs'
import { Image } from '@/components/ui/image'

Router 块使用 AI 基于内容分析智能地路由工作流。与使用简单规则的 Condition 块不同，Router 能理解上下文和意图。

<div className="flex justify-center">
  <Image
    src="/static/blocks/router.png"
    alt="具有多路径的路由器模块"
    width={500}
    height={400}
    className="my-6"
  />
</div>

## Router 与 Condition 的对比

**在以下情况下使用 Router：**
- 需要 AI 驱动的内容分析
- 处理非结构化或多样化的内容
- 需要基于意图的路由（例如，“将支持票据路由到相关部门”）

**在以下情况下使用 Condition：**
- 简单的基于规则的决策足够
- 处理结构化数据或数值比较
- 需要快速、确定性的路由

## 配置选项

### 内容/提示

Router 将分析的内容或提示以做出路由决策。这可以是：

- 用户的直接查询或输入
- 来自前一个块的输出
- 系统生成的消息

### 目标块

Router 可以选择的目标块。Router 会自动检测连接的块，但您也可以：

- 自定义目标块的描述以提高路由准确性
- 为每个目标块指定路由条件
- 排除某些块作为路由目标

### 模型选择

选择一个 AI 模型来支持路由决策：

- **OpenAI**：GPT-4o, o1, o3, o4-mini, gpt-4.1
- **Anthropic**：Claude 3.7 Sonnet
- **Google**：Gemini 2.5 Pro, Gemini 2.0 Flash
- **其他提供商**：Groq, Cerebras, xAI, DeepSeek
- **本地模型**：兼容 Ollama 的模型

使用具有强大推理能力的模型，例如 GPT-4o 或 Claude 3.7 Sonnet，以获得最佳效果。

### API 密钥

您选择的 LLM 提供商的 API 密钥。此密钥会被安全存储并用于身份验证。

## 输出

- **`<router.prompt>`**：路由提示的摘要
- **`<router.selected_path>`**：选择的目标模块
- **`<router.tokens>`**：令牌使用统计
- **`<router.cost>`**：估算的路由成本
- **`<router.model>`**：用于决策的模型

## 示例用例

**客户支持分流** - 将工单路由到专业部门

```
Input (Ticket) → Router → Agent (Engineering) or Agent (Finance)
```

**内容分类** - 分类并路由用户生成的内容

```
Input (Feedback) → Router → Workflow (Product) or Workflow (Technical)
```

**潜在客户资格评估** - 根据资格标准路由潜在客户

```
Input (Lead) → Router → Agent (Enterprise Sales) or Workflow (Self-serve)
```

## 最佳实践

- **提供清晰的目标描述**：通过具体、详细的描述帮助路由器了解何时选择每个目标
- **使用特定的路由标准**：为每条路径定义明确的条件和示例以提高准确性
- **实施回退路径**：为没有特定路径适用的情况连接一个默认目标
- **使用多样化输入进行测试**：确保路由器能够处理各种输入类型、边界情况和意外内容
- **监控路由性能**：定期审查路由决策，并根据实际使用模式优化标准
- **选择合适的模型**：对于复杂的路由决策，使用具有强大推理能力的模型
