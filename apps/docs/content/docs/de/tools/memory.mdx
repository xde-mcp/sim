---
title: Memory
description: Konversationsverlauf speichern und abrufen
---

import { BlockInfoCard } from "@/components/ui/block-info-card"

<BlockInfoCard 
  type="memory"
  color="#F64F9E"
/>

## Übersicht

Der Memory-Block speichert den Konversationsverlauf für Agenten. Jede Erinnerung wird durch eine `conversationId` identifiziert, die Sie bereitstellen. Mehrere Agenten können denselben Speicher nutzen, indem sie dieselbe `conversationId` verwenden.

Der Speicher speichert nur Benutzer- und Assistentennachrichten. Systemnachrichten werden nicht gespeichert – sie werden im Agent-Block konfiguriert und zur Laufzeit vorangestellt.

## Tools

### `memory_add`

Eine Nachricht zum Speicher hinzufügen. Erstellt einen neuen Speicher, wenn die `conversationId` nicht existiert, oder hängt an einen bestehenden Speicher an.

#### Eingabe

| Parameter | Typ | Erforderlich | Beschreibung |
| --------- | ---- | -------- | ----------- |
| `conversationId` | string | Ja | Eindeutige Kennung für die Konversation (z. B. `user-123`, `session-abc`) |
| `role` | string | Ja | Nachrichtenrolle: `user` oder `assistant` |
| `content` | string | Ja | Nachrichteninhalt |

#### Ausgabe

| Parameter | Typ | Beschreibung |
| --------- | ---- | ----------- |
| `success` | boolean | Ob der Vorgang erfolgreich war |
| `memories` | array | Aktualisiertes Speicher-Array |
| `error` | string | Fehlermeldung, falls fehlgeschlagen |

### `memory_get`

Speicher nach Konversations-ID abrufen.

#### Eingabe

| Parameter | Typ | Erforderlich | Beschreibung |
| --------- | ---- | -------- | ----------- |
| `conversationId` | string | Ja | Konversationskennung |

#### Ausgabe

| Parameter | Typ | Beschreibung |
| --------- | ---- | ----------- |
| `success` | boolean | Ob der Vorgang erfolgreich war |
| `memories` | array | Array von Nachrichten mit `role` und `content` |
| `error` | string | Fehlermeldung, falls fehlgeschlagen |

### `memory_get_all`

Alle Erinnerungen für den aktuellen Workspace abrufen.

#### Ausgabe

| Parameter | Typ | Beschreibung |
| --------- | ---- | ----------- |
| `success` | boolean | Ob der Vorgang erfolgreich war |
| `memories` | array | Alle Erinnerungsobjekte mit `conversationId` und `data` Feldern |
| `error` | string | Fehlermeldung, falls fehlgeschlagen |

### `memory_delete`

Erinnerung nach Konversations-ID löschen.

#### Eingabe

| Parameter | Typ | Erforderlich | Beschreibung |
| --------- | ---- | -------- | ----------- |
| `conversationId` | string | Ja | Konversationskennung zum Löschen |

#### Ausgabe

| Parameter | Typ | Beschreibung |
| --------- | ---- | ----------- |
| `success` | boolean | Ob der Vorgang erfolgreich war |
| `message` | string | Bestätigungsnachricht |
| `error` | string | Fehlermeldung, falls fehlgeschlagen |

## Agent-Erinnerungstypen

Bei der Verwendung von Erinnerungen mit einem Agent-Block können Sie konfigurieren, wie der Konversationsverlauf verwaltet wird:

| Typ | Beschreibung |
| ---- | ----------- |
| **Vollständige Konversation** | Speichert alle Nachrichten, begrenzt durch das Kontextfenster des Modells (verwendet 90%, um Platz für die Antwort zu lassen) |
| **Gleitendes Fenster (Nachrichten)** | Behält die letzten N Nachrichten (Standard: 10) |
| **Gleitendes Fenster (Tokens)** | Behält Nachrichten, die in ein Token-Limit passen (Standard: 4000) |

## Hinweise

- Erinnerungen sind pro Workspace begrenzt – Workflows im selben Workspace teilen sich den Erinnerungsspeicher
- Verwenden Sie eindeutige `conversationId` Werte, um Konversationen getrennt zu halten (z.B. Session-IDs, Benutzer-IDs oder UUIDs)
- Systemnachrichten gehören in die Agent-Block-Konfiguration, nicht in die Erinnerung
